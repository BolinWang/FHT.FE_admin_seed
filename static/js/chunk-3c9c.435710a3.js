(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3c9c"],{"12cf":function(t,e,r){"use strict";r.r(e);var a=r("cLjf"),i=r.n(a),n=r("Q2cO"),o=r.n(n),s=r("Asgo"),c=r.n(s),l=r("hDQ3"),p=r.n(l),u=r("unDg"),m=r.n(u),g=r("a+AT"),f=r.n(g);document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()};var d={name:"FhtPreview",components:{draggable:f.a},props:{picList:{type:Array,default:function(){return[]}},deleteIcon:{type:Boolean,default:!1},itemSize:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!0}},data:function(){return{list:[],isDragging:!1,delayedDragging:!1}},computed:{itemStyle:function(){return{width:this.itemSize.width+"px",height:this.itemSize.height+"px"}},dragOptions:function(){return{animation:150,group:"description",ghostClass:"ghost",disabled:this.disabled}}},watch:{picList:{immediate:!0,handler:function(t){this.list=(t||[]).slice(),this.list.map(function(t,e){t.sortNum=t.sortNum?t.sortNum:Math.random(),t.type=t.type||1,t.title=t.picTag||""})}},isDragging:function(t){var e=this;t?this.delayedDragging=!0:this.$nextTick(function(){e.delayedDragging=!1})}},mounted:function(){},methods:{handlePreview:function(t){var e=this;return p()(i.a.mark(function r(){var a,n,o;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(1!==e.list.length||!e.list[0].isnoPic){r.next=3;break}return e.$message.warning("友情提示：暂无图片"),r.abrupt("return",!1);case 3:a=function(t){return new c.a(function(e){var r=new Image;r.src=t.src,r.onload=function(a){t.w=r.width||800,t.h=r.height||600,e(t)}})},n=[],o=0;case 6:if(!(o<e.list.length)){r.next=15;break}return r.t0=n,r.next=10,a(e.list[o]);case 10:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 12:o++,r.next=6;break;case 15:e.$preview.open(t,n);case 16:case"end":return r.stop()}},r,e)}))()},handleDelete:function(t,e){var r=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.list.splice(t,1),r.handleEmit()}).catch(function(){})},handleEmit:function(){this.$emit("emitDelete",this.list)},startDrag:function(){this.isDragging=!0},endDrag:function(t){this.isDragging=!1,this.handleEmit()}}},h=(r("9eYJ"),r("ZrdR")),v=Object(h.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("draggable",{staticClass:"list-group",attrs:{options:t.dragOptions,element:"ul"},on:{start:t.startDrag,end:t.endDrag},model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},[r("transition-group",{staticClass:"previewItems",attrs:{name:"flip-list",type:"transition"}},t._l(t.list,function(e,a){return r("li",{key:e.sortNum,staticClass:"preview-item clearfix",style:t.itemStyle},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.src,expression:"item.src"}],staticClass:"preview-img img-center"}),t._v(" "),e.picTag?r("span",{staticClass:"preview-tags"},[t._v(t._s(e.picTag))]):t._e(),t._v(" "),r("span",{staticClass:"preview-item-actions"},[r("span",{staticClass:"preview-item__item-preview",on:{click:function(e){t.handlePreview(a)}}},[r("i",{staticClass:"el-icon-zoom-in"})]),t._v(" "),t.deleteIcon?r("span",{staticClass:"preview-item__item-delete",on:{click:function(r){t.handleDelete(a,e)}}},[r("i",{staticClass:"el-icon-delete"})]):t._e()])])}))],1)},[],!1,null,"04236aa0",null);v.options.__file="Preview.vue";var y=v.exports,b=r("bS4n"),C=r.n(b),w=r("DeBi"),_={name:"FhtImageCropper",components:{VueCropper:r.n(w).a},props:{cropperList:{type:Array,default:function(){return[]}}},data:function(){return{accept:"image/png, image/jpeg, image/jpg",defaultCropperOptions:{imageName:"",img:"",info:!1,size:1,outputType:"png",canScale:!0,autoCrop:!0,fixed:!0,fixedNumber:[4,3],full:!0},layer_cropper:!1,cropperImgs:[],cropperedImgs:[]}},computed:{itemStyle:function(){return{width:(this.cropperImgs.length>1?400:830)+"px"}},componentStyle:function(){return{height:(this.cropperImgs.length>1?300:600)+"px"}}},watch:{cropperList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cropperImgs=e.map(function(e){return C()({},t.defaultCropperOptions,e)}),this.layer_cropper=this.cropperImgs.length>0}},created:function(){var t=this;this.cropperImgs=this.cropperList.map(function(e){return C()({},t.defaultCropperOptions,e)}),this.layer_cropper=this.cropperImgs.length>0},methods:{cropperClose:function(){this.cropperImgs=[]},changeScale:function(t,e){this.$refs["refCropper"+e][0].changeScale(t)},rotateLeft:function(t){this.$refs["refCropper"+t][0].rotateLeft()},rotateRight:function(t){this.$refs["refCropper"+t][0].rotateRight()},getCropData:function(){var t=this,e=0;this.cropperImgs.forEach(function(r,a){t.$refs["refCropper"+a][0].getCropData(function(a){t.cropperedImgs.push({src:a,title:r.imageName}),++e===t.cropperImgs.length&&(t.layer_cropper=!1,t.$emit("emitCropperData",t.cropperedImgs))})})},uploadImg:function(t,e){var r=this;if(!t.target.value)return console.log("取消上传..."),!1;var a=t.target.files[0];if(!this.accept.includes(a.type))return this.$message.error("请上传"+this.accept.replace(/image\//gi,"")+"的图片"),t.target.value=null,!1;var i=new FileReader;i.onerror=function(t){console.log(t+"读取异常....")},i.onload=function(t){var i="object"===o()(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,n="";n=a.name?a.name.split(".")[0].length<=30?a.name.split(".")[0]:a.name.split(".")[0].substr(0,30):"",r.cropperImgs[e].img=i,r.$set(r.cropperImgs[e],"img",i),r.$set(r.cropperImgs[e],"imageName",n)},i.readAsDataURL(a),this.layer_cropper=!0,t.target.value=null}}},x=(r("1qY2"),Object(h.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dialog-cropper"},[r("el-dialog",{attrs:{visible:t.layer_cropper,title:"图片裁剪",width:"920px"},on:{"update:visible":function(e){t.layer_cropper=e},open:function(e){t.cropperedImgs=[]},close:t.cropperClose}},[r("div",{staticClass:"cropper-wrapper"},t._l(t.cropperImgs,function(e,a){return r("div",{key:a,staticClass:"cropper-item",style:t.itemStyle},[r("div",{staticClass:"cropper-component",style:t.componentStyle},[r("vueCropper",{ref:"refCropper"+a,refInFor:!0,attrs:{img:e.img,"output-size":e.size,"output-type":e.outputType,info:e.info,"can-scale":e.canScale,"auto-crop":e.autoCrop,"auto-crop-width":e.autoCropWidth,"auto-crop-height":e.autoCropHeight,full:e.full,fixed:e.fixed,"fixed-number":e.fixedNumber}})],1),t._v(" "),r("div",{staticClass:"cropper-btn--group clearfix"},[r("el-input",{staticClass:"cropper-input--imageName",attrs:{maxlength:30,placeholder:"请输入图片名称",size:"small"},model:{value:e.imageName,callback:function(r){t.$set(e,"imageName",r)},expression:"item.imageName"}}),t._v(" "),r("el-button-group",{staticClass:"btn-group right"},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"替换图片",placement:"top-start"}},[r("label",{staticClass:"el-button el-button--primary el-button--small",attrs:{for:"changeImage"+a}},[r("i",{staticClass:"el-icon-upload"})])]),t._v(" "),r("input",{attrs:{id:"changeImage"+a,accept:t.accept,type:"file"},on:{change:function(e){t.uploadImg(e,a)}}}),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"放大图片",placement:"top-start"}},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-zoom-in"},on:{click:function(e){t.changeScale(1,a)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缩小图片",placement:"top-start"}},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-zoom-out"},on:{click:function(e){t.changeScale(-1,a)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"逆时针旋转90°",placement:"top-start"}},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-caret-left"},on:{click:function(e){t.rotateLeft(a)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"顺时针旋转90°",placement:"top-start"}},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-caret-right"},on:{click:function(e){t.rotateRight(a)}}})],1)],1)],1)])})),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(e){t.layer_cropper=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.getCropData}},[t._v("确 定")])],1)])],1)},[],!1,null,"a8dd2ab4",null));x.options.__file="Cropper.vue";var D={name:"ExampleImage",components:{Preview:y,ImageCropper:x.exports},filters:{},data:function(){return{layer_cropper:!1,accept:"image/png, image/jpeg, image/jpg",cropperList:[],cropperData:[]}},computed:{},methods:{emitDelete:function(t){this.cropperData=t},emitCropperData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cropperData=[].concat(m()(this.cropperData),m()(t))},uploadImg:function(t){var e=this;return p()(i.a.mark(function r(){var a,n,s,l;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.target.value){r.next=3;break}return console.log("取消上传..."),r.abrupt("return",!1);case 3:a=[],n=function(t){return new c.a(function(e){var r=new FileReader;r.onerror=function(t){console.log(t+"读取异常....")},r.onload=function(r){var a="object"===o()(r.target.result)?window.URL.createObjectURL(new Blob([r.target.result])):r.target.result,i="";i=t.name?t.name.split(".")[0].length<=30?t.name.split(".")[0]:t.name.split(".")[0].substr(0,30):"",e({img:a,imageName:i})},r.readAsDataURL(t)})},s=t.target.files,l=0;case 7:if(!(l<s.length)){r.next=20;break}if(e.accept.includes(s[l].type)){r.next=12;break}return e.$message.error("请上传"+e.accept.replace(/image\//gi,"")+"的图片"),t.target.value=null,r.abrupt("return",!1);case 12:return r.t0=a,r.next=15,n(s[l]);case 15:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 17:l++,r.next=7;break;case 20:e.cropperList=a.map(function(t,e){return{img:t.img,imageName:t.imageName}}),e.layer_cropper=!0,t.target.value=null;case 23:case"end":return r.stop()}},r,e)}))()}}},I=(r("QLDh"),Object(h.a)(D,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"layout-container"},[r("div",{staticStyle:{padding:"0 0 20px 0"}},[r("label",{staticClass:"el-button el-button--primary el-button--small",attrs:{for:"uploadImages"}},[t._v("上传图片")]),t._v(" "),r("input",{attrs:{id:"uploadImages",accept:t.accept,type:"file",multiple:""},on:{change:function(e){t.uploadImg(e)}}})]),t._v(" "),r("div",{staticStyle:{width:"500px"}},[r("Preview",{attrs:{"pic-list":t.cropperData,"delete-icon":!0,disabled:!1,"item-size":{width:122,height:122}},on:{emitDelete:t.emitDelete}})],1),t._v(" "),r("ImageCropper",{attrs:{"cropper-list":t.cropperList},on:{emitCropperData:t.emitCropperData}})],1)},[],!1,null,null,null));I.options.__file="image.vue";e.default=I.exports},"1qY2":function(t,e,r){"use strict";var a=r("s1OP");r.n(a).a},"6E0F":function(t,e,r){},"9eYJ":function(t,e,r){"use strict";var a=r("6E0F");r.n(a).a},QLDh:function(t,e,r){"use strict";var a=r("qVoA");r.n(a).a},qVoA:function(t,e,r){},s1OP:function(t,e,r){}}]);